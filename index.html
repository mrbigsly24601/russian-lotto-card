
<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>Implecs - –†—É—Å—Å–æ–∫–µ –õ–æ—Ç–æ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      margin: 0;
      padding: 16px;
      background: #f5f5f5;
      text-align: center;
    }
    h1 {
      font-size: 1.4rem;
      margin-bottom: 8px;
    }
    p {
      font-size: 0.9rem;
      margin: 4px 0 12px;
    }
    #card {
      margin: 0 auto;
      border-collapse: collapse;
      max-width: 100%;
    }
    #card td {
      border: 1px solid #333;
      width: 10vw;
      max-width: 48px;
      height: 10vw;
      max-height: 48px;
      text-align: center;
      vertical-align: middle;
      font-size: 1.1rem;
      background: #ffffff;
      user-select: none;
      cursor: pointer;
      transition: background 0.15s, color 0.15s;
    }
    #card td.empty {
      background: #eeeeee;
      cursor: default;
    }
    #card td.marked {
      background: #ffdfdf;
      text-decoration: line-through;
      color: #b00020;
      font-weight: 600;
    }
    button {
      margin: 10px 4px;
      padding: 8px 14px;
      font-size: 0.9rem;
      border-radius: 999px;
      border: none;
      background: #ff5252;
      color: #fff;
      cursor: pointer;
    }
    button.secondary {
      background: #e0e0e0;
      color: #333;
    }
  </style>
</head>
<body>
  <h1>üé≤ –ö–∞—Ä—Ç–æ—á–∫–∞ —Ä—É—Å—Å–∫–æ–≥–æ –ª–æ—Ç–æ</h1>
  <p>–ù–∞–∂–∏–º–∞–π—Ç–µ –ø–æ —á–∏—Å–ª–∞–º, —á—Ç–æ–±—ã –æ—Ç–º–µ—á–∞—Ç—å –≤—ã–ø–∞–≤—à–∏–µ –±–æ—á–æ–Ω–∫–∏.</p>
  <p style="font-size:0.8rem;color:#666;">–ü—Ä–∏ –∫–∞–∂–¥–æ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å–æ–∑–¥–∞—ë—Ç—Å—è –Ω–æ–≤–∞—è —Å–ª—É—á–∞–π–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞.</p>
  <div>
    <button onclick="generateCard()">üîÑ –ù–æ–≤–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞</button>
    <button class="secondary" onclick="clearMarks()">–°–Ω—è—Ç—å –æ—Ç–º–µ—Ç–∫–∏</button>
  </div>
  <table id="card"></table>

  <script>
    function generateCard() {
      const rows = 3;
      const cols = 9;
      const grid = Array.from({ length: rows }, () => Array(cols).fill(null));

      const allNums = Array.from({ length: 90 }, (_, i) => i + 1);
      for (let i = allNums.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [allNums[i], allNums[j]] = [allNums[j], allNums[i]];
      }
      const picked = allNums.slice(0, 15).sort((a, b) => a - b);

      const columns = Array.from({ length: cols }, () => []);
      picked.forEach(n => {
        let col = Math.floor((n - 1) / 10);
        if (col > 8) col = 8;
        columns[col].push(n);
      });

      const rowCounts = [0, 0, 0];
      for (let c = 0; c < cols; c++) {
        columns[c].forEach(num => {
          let bestRow = 0;
          for (let r = 1; r < rows; r++) {
            if (rowCounts[r] < rowCounts[bestRow]) bestRow = r;
          }
          grid[bestRow][c] = num;
          rowCounts[bestRow]++;
        });
      }

      const table = document.getElementById("card");
      table.innerHTML = "";
      for (let r = 0; r < rows; r++) {
        const tr = document.createElement("tr");
        for (let c = 0; c < cols; c++) {
          const td = document.createElement("td");
          const val = grid[r][c];
          if (val == null) {
            td.classList.add("empty");
            td.textContent = "";
          } else {
            td.textContent = val;
            td.addEventListener("click", () => {
              td.classList.toggle("marked");
            });
          }
          tr.appendChild(td);
        }
        table.appendChild(tr);
      }
    }

    function clearMarks() {
      document
        .querySelectorAll("#card td.marked")
        .forEach(td => td.classList.remove("marked"));
    }

    generateCard();
  </script>
</body>
</html>
